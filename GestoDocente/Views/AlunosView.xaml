<Window x:Class="GestoDocente.Views.AlunosView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:GestoDocente.ViewModels"
        Title="Gestão de Alunos"
        Height="600" Width="900"
        WindowStartupLocation="CenterScreen"
        Background="#F8F9FA"
        FontFamily="Segoe UI"
        Opacity="0">

    <Window.DataContext>
        <vm:AlunosViewModel />
    </Window.DataContext>

    <!-- Fade-in -->
    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                     From="0" To="1" Duration="0:0:0.4"
                                     AccelerationRatio="0.2" DecelerationRatio="0.8"/>
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Window.Triggers>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Título -->
        <TextBlock Text="👨‍🎓 Gestão de Alunos"
                   FontSize="26"
                   FontWeight="Bold"
                   Foreground="#2C3E50"
                   HorizontalAlignment="Center"
                   Margin="0,0,0,10"/>

        <TextBlock Text="🔍 Pesquisar Aluno"
                   FontSize="18" FontWeight="SemiBold"
                   Foreground="#2C3E50" Margin="0 10 0 5" Grid.Row="1"/>

        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,40,0,10">
            <TextBox Text="{Binding FiltroTexto, UpdateSourceTrigger=PropertyChanged}"
                     Width="300"
                     Height="32"
                     Style="{StaticResource RoundedTextBox}"
                     Margin="0,0,10,0"/>
        </StackPanel>

        <!-- Botões -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,40,0,10">
            <Button Content="🔙 Voltar ao Menu"
                    Click="VoltarAoMenu_Click"
                    Style="{StaticResource CancelButton}"
                    Margin="5" />

            <Button Content="📂 Importar CSV"
                    Command="{Binding ImportCsvCommand}"
                    Style="{StaticResource ModernButton}"
                    Margin="5"/>

            <Button Content="➕ Adicionar Aluno"
                    Command="{Binding AdicionarCommand}"
                    Style="{StaticResource ModernButton}"
                    Margin="5"/>

            <Button Content="🗑️ Remover Aluno"
                    Command="{Binding RemoverCommand}"
                    Style="{StaticResource CancelButton}"
                    Margin="5"/>
        </StackPanel>

        <!-- Tabela de Alunos -->
        <Border Grid.Row="2" CornerRadius="10" BorderBrush="#D5D8DC" BorderThickness="1" Background="White" Margin="0,0,0,171">
            <DataGrid ItemsSource="{Binding AlunosFiltrados}"
                      SelectedItem="{Binding AlunoSelecionado}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      Margin="5"
                      HeadersVisibility="Column"
                      SelectionMode="Single"
                      GridLinesVisibility="None"
                      RowBackground="#FDFEFE"
                      AlternatingRowBackground="#F2F3F4"
                      BorderThickness="0"
                      CanUserAddRows="False">

                <DataGrid.Resources>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="#566573"/>
                        <Setter Property="Foreground" Value="White"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Padding" Value="10,5"/>
                    </Style>
                </DataGrid.Resources>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Número" Binding="{Binding Numero}" Width="100"/>
                    <DataGridTextColumn Header="Nome" Binding="{Binding Nome}" Width="*" />
                    <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="*" />
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- Detalhes adicionais -->
        <StackPanel Grid.Row="2" Margin="0,310,0,0">
            <TextBlock Text="📁 Grupo do Aluno:" FontWeight="Bold" Foreground="#2C3E50" Margin="0,10,0,0"/>
            <TextBlock Text="{Binding GrupoDoAluno}" Margin="0,0,0,10"/>

            <TextBlock Text="📝 Notas Atribuídas:" FontWeight="Bold" Foreground="#2C3E50"/>
            <ItemsControl ItemsSource="{Binding NotasDoAluno}" />
        </StackPanel>
    </Grid>
</Window>